# AI营销-公共研发 Web前端开发规范

## 前言

本开发规范为统一团队内部的技术栈与代码风格，我们已根据该开发规范搭建了脚手架，开发新项目请使用已封装好的脚手架进行项目搭建。

## 前端框架

* Web前端框架：`Vue`
* 跨平台客户端框架：`Electron`

## TypeScript

* 为所有可以声明类型的变量声明类型
* 不要使用 `any`，如果无法确定变量的类型，请使用 `unknown`
* 使用 `interface`声明对象类型和复杂类型，使用 `type`声明简单与联合类型
* 使用 `ref<Instanceof<typeof...>>()的方式`为组件实例声明类型，以获得组件内部暴露属性的代码提示

## UI

### 组件库

* `ElementPlus`：考虑到 `ElementPlus`基于 `Vue`开发，且有着完善和成熟的生态，请使用 `ElementPlus`作为项目主要的UI库，模版默认安装ElementPlus，并设置了可自定义的样式文件
* `Ant Design Vue `：在其他特殊情况下，可以考虑使用
* 使用其他UI库时，我们需要谨慎考虑其对于Vue的适配程度和社区生态是否成熟，避免使用不成熟的UI库导致代码出现未知的问题

### 字体图标

我们推荐使用 `iconfont`作为项目的字体图标，模版中已默认集成 `iconfont`，使用时只需把你的iconfont文件覆盖到 `/assets/css/iconfont`目录中即可

### 样式

* 请使用 `scss`或 `sass`，模版已经集成
* 我们统一使用 `global.scss`对项目的样式进行了初始化，如果你需要进行全局的修改，直接在里面进行修改即可

## 代码检查与格式化

### ESLint

使用 `ESLint`作为项目的代码检查工具，我们已对脚手架模版进行了相关配置

### Prettier

使用Prettier作为项目的代码格式化工具，我们已将Prettier集成进了ESLint中，以保证不会出现格式冲突

```json
{
  "printWidth": 100, //单行长度
  "tabWidth": 2, //缩进
  "useTabs": false, //不使用tab缩进，使用空格
  "semi": true, //使用分号
  "singleQuote": true, //使用单引号
  "proseWrap": "preserve", //禁止markdown自动换行
  "arrowParens": "avoid", // 箭头函数单个参数时省略括号
  "endOfLine": "auto", //自动识别换行符，推荐使用LF
  "htmlWhitespaceSensitivity": "ignore", //忽略html中的空格
}
```

## 接口管理

* 接口管理统一使用[ VueHookPlus](https://inhiblab-core.gitee.io/docs/hooks/)对 `axios`进行封装，开发时只需要编写拦截器和接口，注意一定要为接口提供类型声明
* 请按功能模块对接口进行文件区分，并在typs目录中设置同名ts文件进行类型声明
* 当你使用轮询、并行请求时，请优先考虑 ` VueHookPlus`提供的能力
* `VueHookPlus`还提供了许多非常好的hooks，例如防抖节流

## Pinia规范

1. 请**使用Pinia的Option模式进行编码**，因为 `Steup`模式中，如果你忘记将所有state变量导出，这可能会影响代码的正常运行
2. 如果你想要获取Pinia中的变量，请直接访问而不是定义getter，getter只有当你获得的值需要经过计算时才进行定义
3. 如果你想要对Pinia中的变量进行赋值，请直接进行赋值或者使用patch而不是定义action，action只有当你的赋值行为较为复杂或者是异步操作时才需要
4. 2、3听起来与Vuex不一样，实际上这是严格考虑了Pinia对外部访问的优秀支持和getter、action的实际意义，这样编码能让你少写许多不必要的代码，这也是我们选择pinia的原因
5. 尽量不要在一个store中调用另外一个store，尽管这是可行的，
6. 模版中已经集成了Pinia。

## 拥抱hooks

* `Vue`已经全面支持 `hooks`，请在合适的情况下使用hooks封装你的代码
* 定义 `hooks`也要遵循严格的类型声明，请善用泛型，这会大大提高你代码的兼容与优雅程度
* 我们将会把常用的hooks放在统一的仓库中进行代码维护，也可以发布在公司的私有库中

## 工具函数

对于项目中可以公用的一些方法，请主动将其封装成工具函数放在`utils`文件夹下

## 环境变量

统一使用 `.env.xxx`文件对不同的环境进行区分，模版默认提供develop、test、prod三种环境，请根据需求进行修改

## 自动导入

* 统一使用 `unplugin-auto-import、unplugin-vue-components`进行了组件的自动导入
* 默认配置了vue、vuehookplus、elementplus的自动导入，使用它们的函数与组件无需进行手动导入
